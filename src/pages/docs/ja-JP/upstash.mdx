---
title: アップスタッシュ
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/427?languages=ja&filter=basic&value=0
metaTitle: Upstash Integration Doc | ILLA Cloud
desc: Upstash Redis データベースを ILLA Cloud に接続し、クエリ、操作、データの表示ができるアプリを作成する方法を学ぶ
tagCategory: doc_menu_upstash_click
categoryName: 🔨 統合
categoryPriority: 3
postPriority: 1
---

## <h2 hidden>アップスタッシュとは何ですか？</h2>

UpstashはRedis互換のクラウドネイティブなサーバーレスサービスで、Redis機能をアプリケーションに簡単に統合できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。 ILLA Cloudの文脈では、Upstash統合により、ユーザーはILLAクラウドアプリケーション内のUpstashの機能と機能を活用できます。

このチュートリアルでは、ILLA Builder と Upstash を使用した Admin Panel をいくつかの簡単な手順で作成する方法について説明します。 ILLA Cloudは、社内ツールの迅速な開発と展開を可能にする開発者向けの低コードプラットフォームです。 UI コンポーネントをドラッグ&ドロップしたり、データベースや API に接続したり、JavaScript を書いたりすることで、ページを作成することができます。 Upstashの詳細については、https://upstash.com/(https://upstash.com/)のウェブサイトをご覧ください。

### Upstashにバックエンドを設定する

Upstashにアカウントを作成します。 Upstashにアカウントを作成します。 Amazon、Github、Googleアカウントを使用してサインインすることもできます。 Upstashにアカウントを作成します。 Upstashにアカウントを作成します。 Amazon、Github、Googleアカウントを使用してサインインすることもできます。 Upstashにアカウントを作成します。 Amazon、Github、Googleアカウントを使用してサインインすることもできます。

`Upstash`のアカウントにサインインしたら、Redisの`Create database`ボタンをクリックします。

![up_home](https://cdn.illacloud.com/official-website/img/docs/up_home.jpg)

`Upstash`ダッシュボードで、`Create database`をクリックします。

![up_create_db](https://cdn.illacloud.com/official-website/img/docs/up_create_db.jpg)

注意:データベースは無料の階層にしかありません。

データベース構成の場合は、ご希望のようにデータベースに名前を付けることができます。 ここでは`db1`と名付けます。 あなたの書き込みとユーザーの場所に基づいて、`プライマリリージョン`と`リージョン`を選択してください。 `TSL/SSL` を有効にします。 Evictionを有効にするのは任意です。

![up_db_config](https://cdn.illacloud.com/official-website/img/docs/up_db_config.jpg)

**`create`** ボタンをクリックすると、データベースを使用できるようになりました。

### ILLA Cloud にアップスタッシュを作成

Illaアカウントにログインした後、Illaにリソースを作成するには2つの方法があります。

-   リソースに作成

Illaアカウントにサインインし、ページの上部にある`**リソース**`を選択し、`**新規作成**`ボタンをクリックします。

![external_resource](https://cdn.illacloud.com/official-website/img/docs/external_resource.png)

データベース リストから **`Upstash`** を選択します。

![action_list_0]\(https://cdn.illacloud.com/official-website/img/docs/action_list_0.jpg

下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。

データベースに正常に接続できるかどうかを確認するには、`**接続をテスト**` をクリックします。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。

リソースを作成すると、次のように準備完了の `Upstash` が表示されます。

![up_ex_ready](https://cdn.illacloud.com/official-website/img/docs/up_ex_ready.jpg)

-   ビルダーで作成

Illa アカウントにサインインし、`**App**` ページで Illa Builder でプロジェクトを作成します。 をクリックし、ページの下部にある **`Action List`** に移動します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Upstash`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。

データベースに正常に接続できるかどうかを確認するには、`**接続をテスト**` をクリックします。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。

### 接続設定

ここでは、Upstashデータベースに接続するための情報を提供する必要があります。

![up_config]\(https://cdn.illacloud.com/official-website/img/docs/up_config_rev.jpg

| プロパティー     | 必須 | 説明                                                                                                                                                                                                                                                                                                                                                |
| ---------- | -- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 名前         | 必須 | ILLAでアクションを作成する際のリソース名です。                                                                                                                                                                                                                                                                                                                         |
| Hostname   | 必須 | データベースの URL または IP アドレス                                                                                                                                                                                                                                                                                                                           |
| ポート        | 必須 | 接続に使用するサーバーホストのポート番号。 ポートを指定しない場合、デフォルトのポートは '6379' です。 ポートを指定しない場合、デフォルトのポートは '6379' です。 接続に使用するサーバーホストのポート番号。 ポートを指定しない場合、デフォルトのポートは '6379' です。 ポートを指定しない場合、デフォルトのポートは '6379' です。 ポートを指定しない場合、デフォルトのポートは '6379' です。 接続に使用するサーバーホストのポート番号。 ポートを指定しない場合、デフォルトのポートは '6379' です。 ポートを指定しない場合、デフォルトのポートは '6379' です。 ポートを指定しない場合、デフォルトのポートは '6379' です。 |
| パスワード      | 必須 | 認証にこのパスワードを使用してください。                                                                                                                                                                                                                                                                                                                              |
| SSL オプション  | 必須 | SSLを有効にするかどうか (有効にすることをお勧めします)                                                                                                                                                                                                                                                                                                                    |

必要な情報を入力するために データベースダッシュボードページに移動し、Upstashで作成したデータベースをクリックします。

![up_info](https://cdn.illacloud.com/official-website/img/docs/up_info.jpg)

エンドポイント、パスワード、ポートの上にマウスポインタを置いて、その背後にあるコピーテキストアイコンをクリックすることでコピーできます。

ILLA CloudのUpstash統合設定で、`Name`の名前を入力してください。 `hostname` の `Endpoint` は、 `Port` が与えられ、 `Password` に暗号化された `Password` をコピーします。

![up_config_done](https://cdn.illacloud.com/official-website/img/docs/up_config_rev_done.jpg)

### アクションを作成

Upstashリソースを作成しました。アクションリストからUpstashを選択し、**`Create action`**ボタンを選択することでアクションを追加できます。

![up_resource_list](https://cdn.illacloud.com/official-website/img/docs/up_resource_list.jpg)

これで、ビルドページにUpstashサーバーを追加しました。

![upstash]\(https://cdn.illacloud.com/official-website/img/docs/upstash.jpg

### アップスタッシュの設定

| プロパティー    | 説明                                                             |
| --------- | -------------------------------------------------------------- |
| Redis クエリ | クエリを使用してRedisデータベースに保存されているデータを取得して操作する                        |
| トランス      | JavaScriptを使用して好きなスタイルにデータを変換します                               |

使用例:

1.  値を取得:
    -   ハッシュから値を取得する: **`HGET`** コマンドを使用して、ハッシュ内の特定のフィールドの値を取得します。 例: **`HGET hashKey field`** . 例: **`HGET hashKey field`** .
2.  値をセット:
    -   セットに要素を追加する: **`SADD`** コマンドを使用して、セットに1つ以上の要素を追加します。 例: **`SDD setKey value1 value2`** . 例: **`SDD setKey value1 value2`** .
3.  ハッシュ操作:
    -   ハッシュにフィールドと値のペアをセットする: **`HSET`** コマンドを使用して、ハッシュにフィールドと値のペアを設定します。 例: **`HSET hashKey field value`** . 例: **`HSET hashKey field value`** .
    -   リストに要素を追加する: **`LPUSH`** または **`RPUSH`** コマンドを使用して、リストの先頭または末尾に要素を追加します。 例: **`LPUSH listKey value`** . 例: **`LPUSH listKey value`** .
4.  リスト操作:
    -   リストから要素を取得する: **`LRANGE`** コマンドを使用して、リストから要素の範囲を取得します。 例: **`LRANGE listKey start end`** . 例: **`LRANGE listKey start end`** .
    -   ソートされたセットから要素を取得する: **`ZRANGE`** コマンドを使用して、スコアに基づいてソートされたセットから一連の要素を取得します。 例: **`ZRANGE sortedSetKey start end`** . 例: **`ZRANGE sortedSetKey start end`** .
5.  セット操作:
    -   ソートされたセットに要素を追加する: **`ZADD`** コマンドを使用して、ソートされたセットに要素をスコアとともに追加します。 例: **`ZADD sortedSetKey score1 member1 score2 member2`** . 例: **`ZADD sortedSetKey score1 member1 score2 member2`** .
    -   セットから要素を取得する: **`SMEMBERS`** コマンドを使用して、セットのすべてのメンバーを取得します。 例: **`SMEMBERS setKey`** . 例: **`SMEMBERS setKey`** .
6.  並べ替えセット操作:
    -   ソートされたセットに要素を追加する: **`ZADD`** コマンドを使用して、ソートされたセットに要素をスコアとともに追加します。 例: **`ZADD sortedSetKey score1 member1 score2 member2`** . 例: **`ZADD sortedSetKey score1 member1 score2 member2`** .
    -   ソートされたセットから要素を取得する: **`ZRANGE`** コマンドを使用して、スコアに基づいてソートされたセットから一連の要素を取得します。 例: **`ZRANGE sortedSetKey start end`** . 例: **`ZRANGE sortedSetKey start end`** .

注意: コマンドの完全に包括的なリストとその使用方法については、Redis ドキュメントを参照することができます。

### 大文字小文字を区別する

次に、`**Upstash**`からのデータを`table`コンポーネントにマップする方法を説明します。

#### ステップ 1 アクションを追加

\*\*`employee_profile`と呼ばれるUpstashで、`name`、`level`、`age`、`married`の4つのカラムを含むテーブルを作成しましょう。

次に、ILLA CloudのアクションリストからUpstashの新しいアクションを作成し、upstash2と名付けます。

employee_profile のすべてのデータを一覧表示するには、以下のコードスニペットを Redis クエリセクションに入れます。

```sql
従業員プロフィールを取得
```

出力データは辞書ペアのリストなので、配列に変換したいと考えています。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。 変換器で有効にして、コードを下に置いてください。

```jsx
const jsonString = data[0].result;

// Parse the JSON string into a JavaScript object
const jsonData = JSON.parse(jsonString);

// Access the "employees" property and map it to a new array
const mappedArray = jsonData.employees.map((employee) => ({
  name: employee.name,
  level: employee.level,
  age: employee.age,
  married: employee.married,
}));

return mappedArray;
```

![up_code]\(https://cdn.illacloud.com/official-website/img/docs/up_code.jpg

**`Save`** と **`Run`**をクリックしてアクションを有効にします。

![up_data](https://cdn.illacloud.com/official-website/img/docs/up_data.jpg)

#### ステップ2 コンポーネントを追加

次に、**`table`** コンポーネントを canvas に追加します。

コンポーネントをクリックした後に **`Data Source`** フィールドに、upstash からデータを取得するために `{{upstash2.data}}` を入れます。

#### ステップ3 テスト

最終的な外観は、図のようにする必要があります。

![up_test](https://cdn.illacloud.com/official-website/img/docs/up_test.jpg)
