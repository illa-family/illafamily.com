---
title: Elastic Search
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/367?languages=ja&filter=basic&value=0
metaTitle: Elastic Search Integration Doc | ILLA Cloud
desc: ILLA Cloud を使用して、Elastic Search データに接続して対話します。 全文検索、ログ分析などを実行できるアプリを作成します。
tagCategory: doc_menu_elastic_search_click
categoryName: 🔨 統合
categoryPriority: 3
postPriority: 1
---

## <h2 hidden>弾性検索とは?</h2>

Elastic search は、大量のデータのインデックスと検索に一般的に使用される、分散型の RESTful 検索および分析エンジンです。 Iraでは、Elasticsearchデータソースを使用してElasticsearchインスタンスに接続し、データに対するクエリと集計を実行できます。

### Elastic Searchの作成

Illaアカウントにログインした後、Illaにリソースを作成するには2つの方法があります。

-   リソースに作成

Illaアカウントにサインインし、ページ上部の「**リソース**」を選択し、「**新規作成**」ボタンをクリックします。

![external_resource](https://cdn.illacloud.com/official-website/img/docs/external_resource.png)

データベース一覧から**`Elastic Search`**を選択します。

![action_list](https://cdn.illacloud.com/official-website/img/docs/action_list.png)

下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。

データベースに正常に接続できるかどうかを確認するには、`**接続をテスト**` をクリックします。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。

リソースを作成すると、次のように準備済みのElastic Searchが表示されます。

![ela_ex_ready](https://cdn.illacloud.com/official-website/img/docs/ela_ex_ready.png)

-   ビルダーで作成

Illa アカウントにサインインし、`**App**` ページで Illa Builder でプロジェクトを作成します。 をクリックし、ページの下部にある **`Action List`** に移動します。 `**new**`をクリックし、データベースリストから**`Elastic Search`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Elastic Search`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。 `**new**`をクリックし、データベースリストから**`Elastic Search`**を選択します。 次に、下の「接続設定」で説明されている必要なパラメータを使用してデータベースに接続します。

データベースに正常に接続できるかどうかを確認するには、`**接続をテスト**` をクリックします。 はいの場合は**`リソースを保存`**をクリックします。それ以外の場合は、ホスト名、ポート、ユーザー名、パスワードが正しいことを確認してください。

### 接続設定

ここでは、Elastic Search データベースへの接続情報を提供する必要があります。

![ela_config](https://cdn.illacloud.com/official-website/img/docs/ela_config.png)

| プロパティー      | 必須   | 説明                                                                                       |
| ----------- | ---- | ---------------------------------------------------------------------------------------- |
| 名前          | 必須   | ILLAでアクションを作成する際のリソース名です。                                                                |
| Hostname    | 必須   | データベースの URL または IP アドレス                                                                  |
| ポート         | 必須   | 接続に使用するサーバーホストのポート番号。                                                                    |
| データベース      | 必須   | データベースの名前                                                                                |
| ユーザー名       | 必須   | Elastic Search サーバーへのログイン時に使用するユーザー名です。                                                  |
| パスワード       | 必須   | 認証にこのパスワードを使用してください。                                                                     |
| SSL オプション   | 省略可能 | サーバとのネゴシエーション中にセキュアな SSL TCP/IP 接続が優先される方法を決定します。                                        |

### アクションを作成

Elastic Searchリソースを作成しました。アクションリストからElastic Searchを選択し、**`Create action`**ボタンを選択することで、アクションを追加できます。

![ela_resource_list](https://cdn.illacloud.com/official-website/img/docs/ela_resource_list.png)

これで、Elastic Searchサーバーをビルドページに追加しました。

![ela](https://cdn.illacloud.com/official-website/img/docs/ela.png)

### Elastic Searchの設定

#### 概要

| メソッド名    | 説明                                                                     |
| -------- | ---------------------------------------------------------------------- |
| アクションタイプ | 検索、ドキュメントの取得、ドキュメントの挿入、ドキュメントの更新、ドキュメントの削除                             |
| トランス     | JavaScriptを使用して好きなスタイルにデータを変換します                                       |

#### ドキュメントを挿入する

挿入されるデータを含む JSON ドキュメントを使用して、Elasticsearch クラスタに HTTP PUT リクエストを送信します。

** Input **

| プロパティー     | 必須   | 説明                                             |
| ---------- | ---- | ---------------------------------------------- |
| 本文         | 省略可能 | 挿入するデータを含む JSON ドキュメント                         |
| 目次と索引      | 省略可能 | ドキュメントを挿入する索引の名前                               |

例えば、`value1`、`value2`、`value3`を**`field1`**、**`field2`**に挿入します。 そして **`field3`** Elastic search databaseに、以下のコードスニペットを **本文\`** に、\*\*`Index`\*\* の`insert2`に入れます。

```jsx
{
	"field1": "value1",
	"field2": "value2",
	"field3": "value3"
}
```

** 出力 **

ドキュメントが正常に挿入されたかどうかと挿入されたドキュメントの情報の成功メッセージ。

![ela_insert_data](https://cdn.illacloud.com/official-website/img/official-site/ela_insert_data.png)

メッセージを受け取るには`{{insert.data}}`を使用してください。

![ela_insert_code](https://cdn.illacloud.com/official-website/img/official-site/ela_insert_code.png)

#### ドキュメントの更新

更新するべきドキュメントのIDを持つElasticsearchクラスタにHTTP **`POST`**または**`PUT`**リクエストを送信する そして、変更を指定する JSON ドキュメントです。

** Input **

| プロパティー     | 必須   | 説明                                         |
| ---------- | ---- | ------------------------------------------ |
| 本文         | 省略可能 | フィールドに割り当てる新しい値。                           |
| 目次と索引      | 省略可能 | ドキュメントが格納されている索引の名前。                       |
| Id         | 省略可能 | ドキュメントの一意の識別子                              |

例えば、 `value1` 、 `value2` 、 `value3` を **`field1`** 、 **`field2`**、 **`field3`** を Elastic search databaseに更新します。 **`Index`**の**`Body,`** `insert2`にコードスニペットを入れて、挿入メッセージからドキュメント**`Id`**をコピーして貼り付けます。

```jsx
{"doc":{
	"field1": "value11",
	"field2": "value2",
	"field3": "value3"
}}
```

** 出力 **

ドキュメントが正常に更新されたかどうかと更新されたドキュメントの情報の成功メッセージ。

![ela_update_data](https://cdn.illacloud.com/official-website/img/official-site/ela_update_data.jpg)

メッセージを受け取るには`{{update.data}}`を使用してください。

![ela_update_code](https://cdn.illacloud.com/official-website/img/official-site/ela_update_code.jpg)

#### 検索

クエリとインデックスからドキュメントの取得

** Input **

| プロパティー     | 必須   | 説明                                                          |
| ---------- | ---- | ----------------------------------------------------------- |
| クエリ        | 省略可能 | インデックス内のドキュメントにマッチする検索クエリを指定します。                            |
| 目次と索引      | 省略可能 | 検索するインデックスまたはインデックスの名前を指定します                                |

例えば、キーと値のペア `"field1": "value1"` を持つドキュメントを検索するには、以下のコードスニペットを \*\*`Query` に入れてください。

```jsx
{
	"query": {
		"match": {
			"field1": "value1"
		}
	}
}
```

** 出力 **

ヒット毎のクエリと情報に一致するヒット/ドキュメントの数を含む成功メッセージ。

![ela_search_data](https://cdn.illacloud.com/official-website/img/official-site/ela_search_data.jpg)

メッセージを受け取るには`{{search.data}}`を使用してください。

![ela_search_code](https://cdn.illacloud.com/official-website/img/official-site/ela_search_code.jpg)

#### ドキュメントの取得

取得されるべきドキュメントのIDを持つ、Elasticsearch クラスタに HTTP **`GET`** リクエストを送信します。

** Input **

| プロパティー     | 必須   | 説明                                         |
| ---------- | ---- | ------------------------------------------ |
| 目次と索引      | 省略可能 | ドキュメントが格納されている索引の名前。                       |
| Id         | 省略可能 | ドキュメントの一意の識別子                              |

例えば、ドキュメントの情報を取得するには、今更新しました。 `Index`**に`insert2`を入れ、更新されたメッセージからドキュメント**`Id`\*\*をコピーして貼り付けます。

** 出力 **

は、指定された ID を持つドキュメントを返します。ドキュメントが存在しない場合は **`404 Not Found`** エラーを返します。

![ela_get_data](https://cdn.illacloud.com/official-website/img/official-site/ela_get_data.jpg)

メッセージを受け取るには`{{get.data}}`を使用してください。

![ela_get_code](https://cdn.illacloud.com/official-website/img/official-site/ela_get_code.jpg)

#### ドキュメントの削除

削除されるべきドキュメントの ID で Elasticsearch クラスタに HTTP DELETE リクエストを送信します。

** Input **

| プロパティー     | 必須   | 説明                                         |
| ---------- | ---- | ------------------------------------------ |
| 目次と索引      | 省略可能 | ドキュメントが格納されている索引の名前。                       |
| Id         | 省略可能 | ドキュメントの一意の識別子                              |

例えば、ドキュメントを削除するには、**`Index`**に`insert2`を入れ、更新されたメッセージからドキュメント**`Id`**をコピーして貼り付けます。

** 出力 **

は、指定された ID を持つドキュメントを返します。ドキュメントが存在しない場合は **`404 Not Found`** エラーを返します。

![ela_delete_data](https://cdn.illacloud.com/official-website/img/official-site/ela_delete_data.jpg)
