---
title: Elastic Search
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/367?languages=zhcn&filter=basic&value=0
metaTitle: Elastic Search Integration Doc | ILLA Cloud
desc: 使用 ILLA Cloud与您的 Elastic Search数据连接和交互。 创建能够执行全文搜索、日志分析等应用程序。
tagCategory: doc_menu_elastic_search_click
categoryName: 🔨 集成
categoryPriority: 3
postPriority: 1
---

## <h2 hidden>什么是Elastic Search？</h2>

Elastic search 是一个分布广泛的RESTFI搜索和分析引擎，通常用于索引和搜索大量数据。 在Illa, 您可以使用 Elasticsearch 数据源连接到 Elasticsearch 实例，并在您的数据上执行查询和聚合。

### 创建弹性搜索

在登录到您的 Illa 帐户后，有两种方式在Illa 中创建资源。

-   在资源中创建

登录到您的 Illa 帐户，在页面顶部选择 `**资源**` 并点击 `**创建新的**` 按钮。

![external_resource](https://cdn.illacloud.com/official-website/img/docs/external_resource.png)

从数据库列表中选择 **`Elastic Search`** 。

![action_list](https://cdn.illacloud.com/official-website/img/docs/action_list.png)

使用下面`链接设置`描述的必填参数连接到数据库。

点击 "**测试连接**" 查看我们是否可以成功地连接到数据库。 如果是，请点击 **\`保存资源** \*，请重新检查主机名、端口、用户名和密码是否正确。

创建资源后，将显示随时准备进行的弹性搜索。

![ela_ex_ready](https://cdn.illacloud.com/official-website/img/docs/ela_ex_ready.png)

-   在构建器中创建

登录您的 Illa 帐户，在`**App**` 页面中创建一个项目 并导航到页面底部的 **`Action List` **。 点击`**新**`，然后从数据库列表中选择 **`Elastic Search`** 。 然后，用下面`链接设置`描述的参数连接到数据库。

点击 "**测试连接**" 查看我们是否可以成功地连接到数据库。 如果是，请点击 **\`保存资源** \*，请重新检查主机名、端口、用户名和密码是否正确。

### 连接设置

这里我们需要提供连接到Elastic Search 数据库的信息。

![ela_config](https://cdn.illacloud.com/official-website/img/docs/ela_config.png)

| 属性          | 必填  | 描述                                                                                       |
| ----------- | --- | ---------------------------------------------------------------------------------------- |
| 名称          | 必填  | 在 ILLA 中创建动作时的资源名称。                                                                      |
| Hostname    | 必填  | 您数据库的 URL 或 IP 地址                                                                        |
| 端口          | 必填  | 您应该使用服务器主机的端口号进行连接。                                                                      |
| 数据库         | 必填  | 数据库名称                                                                                    |
| 用户名         | 必填  | 登录到Elastic Search服务器时您想使用的用户名。                                                           |
| 密码          | 必填  | 使用此密码进行身份验证。                                                                             |
| SSL 选项      | 可选的 | 在与服务器谈判时，决定安全的 SSL TCP/IP 连接的优先级程度。                                                      |

### 创建动作

我们创建了Elastic 搜索资源，我们可以通过从动作列表中选择Elastic Search并选择 **`创建动作` ** 按钮来添加动作。

![ela_resource_list](https://cdn.illacloud.com/official-website/img/docs/ela_resource_list.png)

现在我们已经将Elastic Search 服务器添加到我们的建筑页面。

![ela](https://cdn.illacloud.com/official-website/img/docs/ela.png)

### 配置弹性搜索

#### 概览

| 方法名称 | 描述                                                                     |
| ---- | ---------------------------------------------------------------------- |
| 操作类型 | 搜索，获取文档，插入文档，更新文档，删除文档                                                 |
| 转换器  | 将数据转换为你喜欢使用 JavaScript 的样式                                             |

#### 插入文档

发送一个 HTTP PUT 请求到 Elasticsearch 集群，该集群包含要插入的数据。

** Input **

| 属性         | 必填  | 描述                                             |
| ---------- | --- | ---------------------------------------------- |
| 正文内容       | 可选的 | 一个 JSON 文档，其中包含要插入的数据                          |
| 索引         | 可选的 | 插入文档的索引名称                                      |

例如，将`value1`、`value2`和`value3`插入到**`field1`**、`field2`**， 和 **`field3`** 进入我们的Elastic 搜索数据库中，将下面的代码片段放入**Body`** 和 `insert2`**`Index\`\*\*。

```jsx
{
	"field1": "value1",
	"field2": "value2",
	"field3": "value3"
}
```

** 输出 **

是否成功插入文档以及插入文档信息的成功信息。

![ela_insert_data](https://cdn.illacloud.com/official-website/img/official-site/ela_insert_data.png)

使用{{insert.data}}获取消息。

![ela_insert_code](https://cdn.illacloud.com/official-website/img/official-site/ela_insert_code.png)

#### 更新文档

发送一个 HTTP **`POST`** 或 **`PUT`** 的请求到Elasticsearch 集群，其ID应该更新， 和 JSON 文档，指定要做出的更改。

** Input **

| 属性         | 必填  | 描述                                         |
| ---------- | --- | ------------------------------------------ |
| 正文内容       | 可选的 | 要分配给该字段的新值。                                |
| 索引         | 可选的 | 存储文档的索引名称。                                 |
| Id         | 可选的 | 文档唯一标识符。                                   |

例如，将`value1`, `value2`, and `value3`更新到 **`field1`**, **`field2`**, 和 **`field3`** 到 Elastic 搜索数据库中。 将代码片段放入**`Body,`** `插入2`**`Index`** ，并拷贝插入消息中的 **`Id`** 文档。

```jsx
{"doc":
	"field1": "value11",
	"field2": "value2",
	"field3": "value3"
}}
```

** 输出 **

关于文件是否成功更新以及更新文件的信息的成功信息。

![ela_update_data](https://cdn.illacloud.com/official-website/img/official-site/ela_update_data.jpg)

使用{{update.data}}获取消息。

![ela_update_code](https://cdn.illacloud.com/official-website/img/official-site/ela_update_code.jpg)

#### 搜索

查询并从索引处检索文档

** Input **

| 属性      | 必填  | 描述                                                          |
| ------- | --- | ----------------------------------------------------------- |
| 查询      | 可选的 | 指定用于匹配索引中文档的搜索查询                                            |
| 索引      | 可选的 | 指定要搜索的索引或索引的名称                                              |

例如，要搜索数据库以查找具有密钥值对`"field1": "value1", 将下面的代码片段放入**`Query\` 。\*\*

```jsx
{
	"query": {
		"match": {
			"field1": "value1"
		}
	}
}
```

** 输出 **

成功消息与它发现的匹配每次点击的查询和信息的次数相匹配。

![ela_search_data](https://cdn.illacloud.com/official-website/img/official-site/ela_search_data.jpg)

使用{{search.data}}获取消息。

![ela_search_code](https://cdn.illacloud.com/official-website/img/official-site/ela_search_code.jpg)

#### 获取文档

发送一个 HTTP **`GET`** 请求到Elasticsearch 集群，并且应该检索文档的 ID。

** Input **

| 属性         | 必填  | 描述                                         |
| ---------- | --- | ------------------------------------------ |
| 索引         | 可选的 | 存储文档的索引名称。                                 |
| Id         | 可选的 | 文档唯一标识符。                                   |

例如，获取我们刚刚更新的文档的文档信息， 将 "插入2" 到 **`Index`**, 并复制将文档**`Id`** 粘贴到更新消息中。

** 输出 **

返回带有指定ID的文档，如果文档不存在，则返回一个 **\`404 找不到** 错误。

![ela_get_data](https://cdn.illacloud.com/official-website/img/official-site/ela_get_data.jpg)

使用{{get.data}}获取消息。

![ela_get_code](https://cdn.illacloud.com/official-website/img/official-site/ela_get_code.jpg)

#### 删除文档

发送一个 HTTP DELETE 请求到 Elasticsearch 集群，该集群应该被删除。

** Input **

| 属性         | 必填  | 描述                                         |
| ---------- | --- | ------------------------------------------ |
| 索引         | 可选的 | 存储文档的索引名称。                                 |
| Id         | 可选的 | 文档唯一标识符。                                   |

例如，要删除文档，请将 **`Index` **放入2` ，并复制粘贴更新消息中的 **`Id\` \*\*。

** 输出 **

返回带有指定ID的文档，如果文档不存在，则返回一个 **\`404 找不到** 错误。

![ela_delete_data](https://cdn.illacloud.com/official-website/img/official-site/ela_delete_data.jpg)
