---
title: Upstash
crowdinRepo: https://crowdin.com/multilingual/illacloud-website/427?languages=zhcn&filter=basic&value=0
metaTitle: Upstash 集成门 | ILLA Cloud
desc: 学习如何将您的 Upstash Redis 数据库连接到 ILLA Cloud，并创建可以查询、操作和显示数据的应用
tagCategory: doc_menu_upstash_click
categoryName: 🔨 集成
categoryPriority: 3
postPriority: 1
---

## <h2 hidden>什么是Upstash?</h2>

Upstash 是一种无云本机服务器服务与 Redis 兼容，它提供了一种简单的方式将Redis 功能整合到应用程序中。 在ILLA Cloud的情况下，Upstash 集成允许用户在ILLA 云应用程序中利用Upstash 的功能和能力。

本教程概述了使用 ILLA Builder 和 Upstash 在几个简单步骤创建管理员面板的过程。 ILLA Cloud是开发者的低代码平台，能够快速开发和部署内部工具。 它允许通过拖放UI组件创建页面，并连接到任何数据库或API，以及写入 JavaScript。 要了解更多关于 Upstash 的信息，请访问他们的网站 https://upstash.com/(https://upstash.com/) 让我们开始吧！

### 在 Upstash 上设置您的后端

在 Upstash 上创建一个帐户。 您可以选择使用您的亚马逊、Github或谷歌帐户登录。

在 `Upstash`上签入您的帐户后，点击Redis中的`Create database`按钮。

![up_home](https://cdn.illacloud.com/official-website/img/docs/up_home.jpg)

在 `Upstash` 控制面板上，点击 `Create database` 。

![up_create_db](https://cdn.illacloud.com/official-website/img/docs/up_create_db.jpg)

注意：您只能在免费级别上有ONE数据库。

对于数据库配置，您可以按自己的要求命名数据库。 我们在这里命名是 `db1'。 基于您的写入和读取用户位置，选择"主区域"和"读取区域"。 启用`TSL/SL\`。 启用驱逐是可选的。

![up_db_config](https://cdn.illacloud.com/official-website/img/docs/up_db_config.jpg)

点击 **`create` ** 按钮，我们现在可以使用一个数据库。

### 在 ILLA 云中创建 Upstash

在登录到您的 Illa 帐户后，有两种方式在Illa 中创建资源。

-   在资源中创建

登录到您的 Illa 帐户，在页面顶部选择 `**Resources**` 并点击 `**Create New**` 按钮。

![external_resource](https://cdn.illacloud.com/official-website/img/docs/external_resource.png)

从数据库列表中选择 **`Upstash`** 。

![action_list_0](https://cdn.illacloud.com/official-website/img/docs/action_list_0.jpg)

使用下面`链接设置`描述的必填参数连接到数据库。

点击 "**测试连接**" 查看我们是否可以成功地连接到数据库。 如果是，请点击 **\`保存资源** \*，请重新检查主机名、端口、用户名和密码是否正确。

在创建资源后，准备好的 `Upstash` 将显示。

![up_ex_ready](https://cdn.illacloud.com/official-website/img/docs/up_ex_ready.jpg)

-   在构建器中创建

登录到您的 Illa 帐户，在“**App**”页面上在 Illa Builder 创建一个项目 并导航到页面底部的 **`Action List` **。 点击`**新**`，然后从数据库列表中选择 **`Upstash`** 。 然后，用下面`链接设置`描述的参数连接到数据库。

点击 "**测试连接**" 查看我们是否可以成功地连接到数据库。 如果是，请点击 **\`保存资源** \*，请重新检查主机名、端口、用户名和密码是否正确。

### 连接设置

这里我们需要提供连接到 Upstash 数据库的信息。

![up_config](https://cdn.illacloud.com/official-website/img/docs/up_config_rev.jpg)

| 属性         | 必填 | 描述                                                                                                        |
| ---------- | -- | --------------------------------------------------------------------------------------------------------- |
| 名称         | 必填 | 在 ILLA 中创建动作时的资源名称。                                                                                       |
| Hostname   | 必填 | 您数据库的 URL 或 IP 地址                                                                                         |
| 端口         | 必填 | 您应该使用服务器主机的端口号进行连接。 如果您没有指定端口，默认端口为“6379”。                                                                |
| 密码         | 必填 | 使用此密码进行身份验证。                                                                                              |
| SSL 选项     | 必填 | 是否启用 SSL (建议启用)                                                                                           |

为了填写所需的资料, 转到数据库仪表板页面并点击我们刚刚在您的 Upstash 中创建的数据库。

![up_info](https://cdn.illacloud.com/official-website/img/docs/up_info.jpg)

您可以通过鼠标悬停在端点、密码和端口并点击背面的文本图标来复制它。

在 Upstash 集成配置中，在 ILLA Cloud 中使用你想要的 `name` 名称， `hostname`的端点`，给`Port`的端点`，并复制`Password`的加密版本`Password`。

![up_config_done](https://cdn.illacloud.com/official-website/img/docs/up_config_rev_done.jpg)

### 创建动作

我们创建了一个 Upstash 资源，我们可以从动作列表中选择 Upstash 并选择 **`Create action` ** 按钮来添加动作。

![up_resource_list](https://cdn.illacloud.com/official-website/img/docs/up_resource_list.jpg)

现在我们已经将 Upstash 服务器添加到我们的建筑页面作为一个动作。

![upstash](https://cdn.illacloud.com/official-website/img/docs/upstash.jpg)

### 配置 Upstah

| 属性       | 描述                                                             |
| -------- | -------------------------------------------------------------- |
| Redis 查询 | 使用查询来检索和操纵你Redis数据库中存储的数据                                      |
| 转换器      | 将数据转换为你喜欢使用 JavaScript 的样式                                     |

示例用法：

1.  获取值：
    -   获取值：使用 **`GET`** 命令检索与特定键相关的值。 例如：**`GET key`**。
2.  设定值：
    -   设置一个值：使用 **`SET`** 命令来设置一个键值。 例如**`SET 密钥值`**。
3.  哈希操作：
    -   在哈希中设置字段值对：使用 **`HSET`** 命令在哈希中设置一个字段值对。 例如：**`HSET hashKey field 值`**。
    -   从哈希中获取值：使用 **`HGET`** 命令来检索哈希中特定字段的值。 例如：**`HGET hashkey field`**。
4.  列出操作：
    -   在列表中添加元素：使用 **`LPUSH` 或 **`RPUSH` 命令分别将元素添加到列表的开头或结尾。 例如：**`LPUSH listKey value`**。
    -   从列表中获取元素：使用 **`LRANGE`** 命令从列表中获取一系列元素。 例如：**`LRANGE ListKey 开头`**。
5.  设置操作：
    -   将元素添加到集合中：使用 **`SADD`** 命令将一个或多个元素添加到集合中。 例如：**`SADD setKey value1 value2`**。
    -   从一组中获取元素：使用 **`SMEMBERS`** 命令获取集合的所有成员。 例如：**`SMEMBERS setKey`**。
6.  已排序的设置操作：
    -   将元素添加到已排序的集合中：使用 **`ZADD`** 命令将元素添加到已排序的集合中。 例如：**`ZADD 排序设置Key 分数1 member2 member2`**。
    -   从已排序的组获取元素：使用 **`ZRANGE`** 命令从一组根据他们的得分排序的元素中获取一系列元素。 例如：**\`ZRANGE 排序的设置键开始尾部**。

注意：您可以参考Redis文档获取完整完整的命令及其使用列表。

### 使用大小写

接下来，我们将演示如何将数据从 `**Upstassh**` 映射到 `table` 组件中。

#### 步骤 1 添加动作

让我们在乌普斯塔什创建一个叫做“雇员概况”的桌子，\*\* 包括4栏`name`、`level`、`age`和已婚'。

然后我们可以在 ILLA 云中为Upstash 创建一个新的动作，并且命名为Upstash2。

若要在员工个人资料中列出所有数据，请将代码片段放在Redis 查询部分。

```sql
GET 员工资料
```

由于输出数据是字典对应列表，因此我们想要将它变成一个数组。 在转换中，启用它并将代码放在下面。

```jsx
const jsonString = data[0].result;

// Parse the JSON string into a JavaScript object
const jsonData = JSON.parse(jsonString);

// Access the "employees" property and map it to a new array
const mappedArray = jsonData.employees.map((employee) => ({
  name: employee.name,
  level: employee.level,
  age: employee.age,
  married: employee.married,
}));

return mappedArray;
```

![up_code](https://cdn.illacloud.com/official-website/img/docs/up_code.jpg)

点击 **\`保存** 和 **`Run`** 激活此操作。

![up_data](https://cdn.illacloud.com/official-website/img/docs/up_data.jpg)

#### 步骤 2 添加组件

接下来，我们可以在画布中添加 **`table`** 组件。

In the **`Data Source`** field in the Inspect page after clicking on the component, put `{{upstash2.data}}` to retrieve the data from upstash.

#### 第 3 步测试

最后的外观应该像显示的那样。

![up_test](https://cdn.illacloud.com/official-website/img/docs/up_test.jpg)
